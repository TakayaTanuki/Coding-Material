<!doctype html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <title>練習</title>

</head>

<body>
    <link rel="stylesheet" href=".\js-code-recipe\samples\c02\023\style.css">
    <!--main.jsを読み込む-->
    <script src="Javascript.js" defer></Script>

    <!--
    id：1つのHTML文書内で同じid名を使うことができない
    class：何回でも同じclass名を使うことができる
    ⇒これらはタグ(a,img)に付与することができる。
    例：<a href="~~" class="next page">

    span：囲まれた前後に改行が入らない
    例：これは<span>例文</span>です⇒これは例文です
    div：囲まれた前後に改行が入る
    例：これは<div>例文</div>です
    ⇒これは
    　例文
    　です
    -->

    <!--
    ＜Apache Tomcat をlinuxにインストール＞
○Tomcatのダウンロード
スーパーユーザーに
・sudo su -

・man wget
⇒wget(指定したURLからファイルをダウンロード)

wgetがない場合
・yum install wget

----------------------------------------------------------------------------------
jdkがない場合
wget https://download.java.net/java/ga/jdk11/openjdk-11_linux-x64_bin.tar.gz
tar zxf openjdk-11_linux-x64_bin.tar.gz -C /usr/local⇒ここ任意の場所
(環境変数の設定)
export JAVA_HOME=/usr/local/jdk-11
export PATH=$PATH:/usr/local/jdk-11/bin
----------------------------------------------------------------------------------

・cd /tmp

・wget http://ftp.kddilabs.jp/infosystems/apache/tomcat/tomcat-9/v9.0.31/bin/apache-tomcat-9.0.31.tar.gz

Linux 上で Tomcat を動かすための専用ユーザとして tomcat を追加
・useradd -s /sbin/nologin tomcat

ユーザー一覧を確認
・cat /etc/passwd

Tomcatの解凍
tar -xzvf apache-tomcat-9.0.X.tar.gz

mv apache-tomcat-9.0.X /opt

Tomcatの所有者とグループを設定
chown -R tomcat:tomcat /opt/apache-tomcat-9.0.XX

/etc/systemd/system/tomcat.serviceを新たに作成するために
・cd /etc/systemd/system/
・vim tomcat.service
書き込む内容(()はどっちでもいい)
----------------------------------------
[Unit]
Description=Apache Tomcat 9
After=(syslog.target) network.target

[Service]
User=tomcat
Group=tomcat
Type=oneshot
PIDFile=/opt/apache-tomcat-9.0.X/tomcat.pid
RemainAfterExit=yes

ExecStart=/opt/apache-tomcat-9.0.X/bin/startup.sh
ExecStop=/opt/apache-tomcat-9.0.X/bin/shutdown.sh
ExecReStart=/opt/apache-tomcat-9.0.X/bin/shutdown.sh;/opt/apache-tomcat-9.0.X/bin/startup.sh

[Install]
WantedBy=multi-user.targe
------------------------------------------
作成した定義ファイルの権限を755に変更
・chmod 755 /etc/systemd/system/tomcat.service

サービスに登録(自動起動が有効になる)
・systemctl enable tomcat

Tomcatを起動
・systemctl start tomcat
Tomcatを停止
systemctl stop tomcat

ローカル端末からホストOSにアクセスする方法
virtual boxでポートフォワーディングを設定
Tomcatは8080なので、例えばローカルの28080に通信を飛ばすとホストの8080に通信を行うというように設定できる。
なので、ローカルでhttp://127.0.0.1:28080を指定すればホストのTomcatに接続できる

○Tomcatにhtmlファイルを配備、アクセス
\webapps\examplesまで移動し、vim test.htmlとして以下を記入

<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <title>test</title>
</head>

<body>
Now testing...
</body>
</html>

○ApacheとTomcatの連携
・/etc/httpd/conf/httpd.conf＝configファイル
ここで2つのファイルを読み込んでいる、ファイルの内容によっては変えなくてもいい？？？

・/etc/httpd/conf.d/proxy-ajp.conf
#アクセス元：http://localhost/docs
#↓
#転送先：http://localhost:8009(8080)/
<Location /docs>
ProxyPass ajp://localhost:8009/

・/etc/httpd/conf.modules.d/00-proxy.conf
利用するモジュールがコメントアウトされていないように
https://www.adminweb.jp/apache/tomcat/index3.html
-->

</body>

</html>